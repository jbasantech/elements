<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Elements Python Web app | elementsproject.org</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Elements Python Web app" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Elements - an open source, sidechain-capable blockchain platform." />
<meta property="og:description" content="Elements - an open source, sidechain-capable blockchain platform." />
<link rel="canonical" href="http://localhost:4000/elements-code-tutorial/web-application" />
<meta property="og:url" content="http://localhost:4000/elements-code-tutorial/web-application" />
<meta property="og:site_name" content="elementsproject.org" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Elements Python Web app" />
<script type="application/ld+json">
{"url":"http://localhost:4000/elements-code-tutorial/web-application","@type":"WebPage","description":"Elements - an open source, sidechain-capable blockchain platform.","headline":"Elements Python Web app","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link href='/assets/open-sans.css' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/bootstrap-v3.3.7.min.css">
  <script src="/assets/jquery-v3.3.1.min.js"></script>
  <script src="/assets/bootstrap-v3.3.7.min.js"></script><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="elementsproject.org" /></head>
<body><header class="site-header" role="banner">

<div class="wrapper">
  <img class="logo-float-left" alt="" src="http://localhost:4000/images/basantech_logo_no_border.png" /><span><a class="site-title" rel="author" href="/">elementsproject.org</a></span>
</div>

<nav class="navbar navbar-default navbar-elements-narrow">
  <div class="container-fluid">

    <!-- Enable mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#collapsing-nav-bar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <!-- Nav links for toggling -->
    <div class="collapse navbar-collapse" id="collapsing-nav-bar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/how-it-works">How it works</a></li> 
        <li><a href="/features">Features</a></li>
        <!-- <li><a href="/community">Community</a></li> -->
        <li><a href="/en/doc">RPC Docs</a></li>
        <!-- <li><a href="https://github.com/ElementsProject/elements/releases">Download</a></li> -->

        <li class="dropdown">
          <a data-toggle="dropdown" role="button">Code Tutorial<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/elements-code-tutorial/overview">Tutorial Overview</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/elements-code-tutorial/installing-bitcoin">Installing Bitcoin</a></li>
            <li><a href="/elements-code-tutorial/installing-elements">Installing Elements</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/elements-code-tutorial/working-environment">Setting up your working environment</a></li>
            <li><a href="/elements-code-tutorial/basic-operations">Using Elements to perform basic operations</a></li>
            <li><a href="/elements-code-tutorial/confidential-transactions">Using Confidential Transactions</a></li>
            <li><a href="/elements-code-tutorial/issuing-assets">Issuing your own assets</a></li>
            <li><a href="/elements-code-tutorial/reissuing-assets">Reissuing assets</a></li>
            <li><a href="/elements-code-tutorial/block-creation">Block creation in a Strong Federation</a></li>
            <li><a href="/elements-code-tutorial/sidechain">Elements as a Sidechain</a></li>
            <li><a href="/elements-code-tutorial/blockchain">Elements as a standalone Blockchain</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/elements-code-tutorial/application-development">Developing applications on Elements</a></li>
            <li><a href="/elements-code-tutorial/desktop-application-python">Desktop application example in Python</a></li>
            <li><a href="/elements-code-tutorial/web-application">Web application example in Python using Flask</a></li>
            <li><a href="/elements-code-tutorial/desktop-application-dotnetcore">Desktop application example in C# using .NET Core</a></li>
            <li><a href="/elements-code-tutorial/web-application-dotnetcore">MVC Web application example in C# using .NET Core</a></li>
            <li><a href="/elements-code-tutorial/other-languages">Go, Ruby, Java, Perl examples</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/elements-code-tutorial/easy-run-code">An easy way to run the main tutorial code</a></li>
            <li><a href="/elements-code-tutorial/advanced-examples">Advanced examples</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="https://github.com/ElementsProject/elements">Elements on Github</a></li>
          </ul>
        </li>   
      </ul>

    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<script>
$(document).ready(function() {
  // Assign the 'active' class for currently viewed page 

  var pathname = window.location.pathname;
  // Remove trailng '/'
  if (pathname.charAt(pathname.length - 1) == '/') {
    pathname = pathname.substr(0, pathname.length - 1);
  }

  // Sub pages not in sub menu (e.g. features/confidential-transactions)
  var secondForwardSlashIndex = pathname.indexOf("/", 1);
  if (-1 != secondForwardSlashIndex)
  {
    mainpathname = pathname.substr(0, secondForwardSlashIndex);
    $('.nav > li > a[href="'+mainpathname+'"]').parent().addClass('active');
  }
  
  // Top level nav bar item
  $('.nav > li > a[href="'+pathname+'"]').parent().addClass('active');

  // Nav bar drop down item - must be linked to with the "/" prefix (e.g. /elements-code-tutorial/) in the menu html above
  $('.nav > li > ul> li > a[href="'+pathname+'"]').parent().parent().parent().addClass('active');  

  // Nav bar drop down sub item
  $('.nav > li > ul> li > a[href="'+pathname+'"]').parent().addClass('active');
})
</script>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <div class="post-content">
    <h1 id="elements-code-tutorial">Elements code tutorial</h1>

<h2 id="python-web-application-example-using-flask">Python web application example using Flask</h2>

<p>Flask is one of the most popular web frameworks for Python. This example shows how to use the framework to display the results of RPC calls to our Elements node on a web page, forming the building block for web application development. We will be setting up a simple example, but you can learn about the full range of features in Flask <a href="http://flask.pocoo.org/">here</a>.</p>

<p>We will use the Python code from the previous tutorial section and have it run from Flask so that we can write the output to a web page.</p>

<p>Assuming you have already installed the prerequisites in the <a href="http://localhost:4000/elements-code-tutorial/desktop-application-python">Desktop application example in Python</a> section (i.e. python3-pip, virtualenv), we just need to set up the environment and install Flask:</p>

<pre><code>cd
mkdir elementstutorialflask
cd elementstutorialflask
virtualenv venv
source venv/bin/activate
pip3 install python-bitcoinrpc
pip3 install Flask
</code></pre>

<p>Before we try running any code make sure the required daemons are running.</p>

<h5 id="note-if-you-get-an-error-connecting-to-the-elements-client-when-you-run-the-code-below-it-may-be-because-your-node-has-been-left-in-an-altered-state-after-quitting-the-tutorial-code-at-an-early-stage-to-refresh-and-reset-the-daemons-blockchain-and-config-files-re-run-the-first-section-of-the-tutorial-code-up-to-and-including-the-lines-where-the-3-config-files-are-copied-into-the-new-directories-then-run-the-commands-above-to-start-the-required-daemons">Note: If you get an error connecting to the elements client when you run the code below it may be because your node has been left in an altered state after quitting the tutorial code at an early stage. To refresh and reset the daemon’s blockchain and config files re-run the first section of the tutorial code up to and including the lines where the 3 config files are copied into the new directories, then run the commands above to start the required daemons.</h5>

<p>Create a file named <strong>elementstutorial.py</strong>, into which you should paste the following code, most of which you will be familiar with from the last section. Again, we will be using AuthServiceProxy to handle the connection, authentication and data typing for us as we communicate with our node.</p>

<h5 id="note-python-requires-that-lines-are-indented-correctly-make-sure-the-code-below-is-copied-correctly-and-is-using-4-spaces-for-indenting-lines-also-note-that-some-of-the-lines-below-wrap-when-viewed-in-a-browser">Note: Python requires that lines are indented correctly. Make sure the code below is copied correctly and is using 4 spaces for indenting lines. Also note that some of the lines below wrap when viewed in a browser.</h5>

<pre><code>from flask import Flask
from bitcoinrpc.authproxy import AuthServiceProxy, JSONRPCException

app = Flask(__name__)
 
@app.route("/")
def elements():
    rpc_port = 18884
    rpc_user = 'user1'
    rpc_password = 'password1'

    try:
        rpc_connection = AuthServiceProxy("http://%s:%s@127.0.0.1:%s"%(rpc_user, rpc_password, rpc_port))
    
        result = rpc_connection.getwalletinfo()
    
    except JSONRPCException as json_exception:
        return "A JSON RPC Exception occured: " + str(json_exception)
    except Exception as general_exception:
        return "An Exception occured: " + str(general_exception)

    return str(result['balance']['bitcoin'])
 
if __name__ == "__main__":
    app.run()
</code></pre>

<p>Start the web server and execute our code:</p>

<pre><code>FLASK_APP=elementstutorial.py flask run
</code></pre>

<p>You should see the web server startup. Now all you have to do is open a browser and go to:</p>

<div class="console-output">http://127.0.0.1:5000
</div>

<p>Which simply writes the result of the “balance” call to the page:</p>

<p><img class="" alt="" src="http://localhost:4000/images/flask.png" /></p>

<p>As in the previous exercise, this is intended to get you up and running. You now have a functioning setup which you can use as a building block for further development using Flask.</p>

<p><a href="http://localhost:4000/elements-code-tutorial/desktop-application-dotnetcore">Next: Desktop application example in C# using .NET Core</a></p>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <img class="logo-footer" alt="" src="http://localhost:4000/images/elements_logo_no_border.png" /> 
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list"><li class="footer-links"><a href="https://github.com/ElementsProject/elementsproject.github.io">elementsproject.org github</a></li><li class="footer-links"><a href="https://github.com/ElementsProject/elements">elements github</a></li></ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Elements - an open source, sidechain-capable blockchain platform.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
