<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Reissuing assets | elementsproject.org</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Reissuing assets" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Elements - an open source, sidechain-capable blockchain platform." />
<meta property="og:description" content="Elements - an open source, sidechain-capable blockchain platform." />
<link rel="canonical" href="http://localhost:4000/elements-code-tutorial/reissuing-assets" />
<meta property="og:url" content="http://localhost:4000/elements-code-tutorial/reissuing-assets" />
<meta property="og:site_name" content="elementsproject.org" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Reissuing assets" />
<script type="application/ld+json">
{"url":"http://localhost:4000/elements-code-tutorial/reissuing-assets","@type":"WebPage","description":"Elements - an open source, sidechain-capable blockchain platform.","headline":"Reissuing assets","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link href='/assets/open-sans.css' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="stylesheet" href="/assets/bootstrap-v3.3.7.min.css">
  <script src="/assets/jquery-v3.3.1.min.js"></script>
  <script src="/assets/bootstrap-v3.3.7.min.js"></script><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="elementsproject.org" /></head>
<body><header class="site-header" role="banner">

<div class="wrapper">
  <img class="logo-float-left" alt="" src="http://localhost:4000/images/basantech_logo_no_border.png" /><span><a class="site-title" rel="author" href="/">elementsproject.org</a></span>
</div>

<nav class="navbar navbar-default navbar-elements-narrow">
  <div class="container-fluid">

    <!-- Enable mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#collapsing-nav-bar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <!-- Nav links for toggling -->
    <div class="collapse navbar-collapse" id="collapsing-nav-bar">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/how-it-works">How it works</a></li> 
        <li><a href="/features">Features</a></li>
        <!-- <li><a href="/community">Community</a></li> -->
        <li><a href="/en/doc">RPC Docs</a></li>
        <!-- <li><a href="https://github.com/ElementsProject/elements/releases">Download</a></li> -->

        <li class="dropdown">
          <a data-toggle="dropdown" role="button">Code Tutorial<span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="/elements-code-tutorial/overview">Tutorial Overview</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/elements-code-tutorial/installing-bitcoin">Installing Bitcoin</a></li>
            <li><a href="/elements-code-tutorial/installing-elements">Installing Elements</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/elements-code-tutorial/working-environment">Setting up your working environment</a></li>
            <li><a href="/elements-code-tutorial/basic-operations">Using Elements to perform basic operations</a></li>
            <li><a href="/elements-code-tutorial/confidential-transactions">Using Confidential Transactions</a></li>
            <li><a href="/elements-code-tutorial/issuing-assets">Issuing your own assets</a></li>
            <li><a href="/elements-code-tutorial/reissuing-assets">Reissuing assets</a></li>
            <li><a href="/elements-code-tutorial/block-creation">Block creation in a Strong Federation</a></li>
            <li><a href="/elements-code-tutorial/sidechain">Elements as a Sidechain</a></li>
            <li><a href="/elements-code-tutorial/blockchain">Elements as a standalone Blockchain</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/elements-code-tutorial/application-development">Developing applications on Elements</a></li>
            <li><a href="/elements-code-tutorial/desktop-application-python">Desktop application example in Python</a></li>
            <li><a href="/elements-code-tutorial/web-application">Web application example in Python using Flask</a></li>
            <li><a href="/elements-code-tutorial/desktop-application-dotnetcore">Desktop application example in C# using .NET Core</a></li>
            <li><a href="/elements-code-tutorial/web-application-dotnetcore">MVC Web application example in C# using .NET Core</a></li>
            <li><a href="/elements-code-tutorial/other-languages">Go, Ruby, Java, Perl examples</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="/elements-code-tutorial/easy-run-code">An easy way to run the main tutorial code</a></li>
            <li><a href="/elements-code-tutorial/advanced-examples">Advanced examples</a></li>
            <li role="separator" class="divider"></li>
            <li><a href="https://github.com/ElementsProject/elements">Elements on Github</a></li>
          </ul>
        </li>   
      </ul>

    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

<script>
$(document).ready(function() {
  // Assign the 'active' class for currently viewed page 

  var pathname = window.location.pathname;
  // Remove trailng '/'
  if (pathname.charAt(pathname.length - 1) == '/') {
    pathname = pathname.substr(0, pathname.length - 1);
  }

  // Sub pages not in sub menu (e.g. features/confidential-transactions)
  var secondForwardSlashIndex = pathname.indexOf("/", 1);
  if (-1 != secondForwardSlashIndex)
  {
    mainpathname = pathname.substr(0, secondForwardSlashIndex);
    $('.nav > li > a[href="'+mainpathname+'"]').parent().addClass('active');
  }
  
  // Top level nav bar item
  $('.nav > li > a[href="'+pathname+'"]').parent().addClass('active');

  // Nav bar drop down item - must be linked to with the "/" prefix (e.g. /elements-code-tutorial/) in the menu html above
  $('.nav > li > ul> li > a[href="'+pathname+'"]').parent().parent().parent().addClass('active');  

  // Nav bar drop down sub item
  $('.nav > li > ul> li > a[href="'+pathname+'"]').parent().addClass('active');
})
</script>

</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <div class="post-content">
    <h1 id="elements-code-tutorial">Elements code tutorial</h1>

<h2 id="reissuing-assets">Reissuing assets</h2>

<p>In this section we’ll look at reissuing an amount of the asset we previously issued. Reissuing just means “creating some more of” in this context. For future use, we’ll store the result of the “reissueasset” command in a variable named “RTRANS” and from that, strip out the transaction ID, storing it in another variable named “RTXID”:</p>

<pre><code>RTRANS=$(e1-cli reissueasset $ASSET 99)
RTXID=$(echo $RTRANS | jq -r '.txid')
</code></pre>

<p>We’ve just created 99 more units of our new asset. As an aside, because we have already labelled the asset we could have also passed “demoasset” in as the first parameter instead of the hex identifier and it would have worked exactly the same.</p>

<p>To check this issuance history of our asset (and ignore the “bitcoin” issuance) we can run the “listissuances” command and specify the asset we are interested in:</p>

<pre><code>e1-cli listissuances $ASSET
</code></pre>

<p>For the above command you may also pass the asset label in instead of the hex value. As has been noted before, be aware that labels are stored locally and are not network-wide.</p>

<p>Along with the original issuance you should see a new entry with the following property:</p>

<div class="console-output">"isreissuance": true,
</div>

<p>This property allows us to differentiate between initial issuances and reissuances. Note that the Transaction ID where amounts of the asset were created is also included in the returned data.</p>

<p>Let’s look at the details of the transaction where we reissued our asset:</p>

<pre><code>e1-cli gettransaction $RTXID
</code></pre>

<p>Scroll to the top of the returned transaction data as there are a few things worth noting here. The first is that within the “amount” section we can see that 0 “bitcoin” and 99 “demoasset” were transacted:</p>

<div class="console-output">"amount": {
  "bitcoin": 0.00000000,
  "33244cc19dd9df0fd901e27246e3413c8f6a560451e2f3721fb6f636791087c7": 0.00000000,
  "demoasset": 99.00000000,
</div>

<p>This information suggests that an Elements transaction can transact more than one type of asset within the same transaction, which is indeed the case.</p>

<h5 id="note-to-send-different-types-of-asset-in-the-same-transaction-the-sendmany-command-is-used-the-syntax-is-the-same-as-in-bitcoin">NOTE: To send different types of asset in the same transaction, the “sendmany” command is used. The syntax is the same as in bitcoin.</h5>

<p>The “amount” section shows the net effect of the transaction as: 0 “bitcoin”, 99 “demoasset” and also another asset that is 0. That unlabelled asset is our reissuance token (the hex for which will differ from that above but the results are otherwise the same). What this shows is that once the sent and received amounts are totalled we have created 99 “demoasset”. You can see how the values in the “amount” section are derived by scrolling down the returned data and looking within the “details” section.</p>

<p>You will see that amounts of 99 “demoasset” and 1 reissuance token were sent:</p>

<div class="console-output">"category": "send",
"amount": -99.00000000,

"category": "send",
"amount": -1.00000000,
</div>

<p>And that further on the same amounts were received:</p>

<div class="console-output">"category": "receive",
"amount": 99.00000000,

"category": "receive",
"amount": 1.00000000,
</div>

<p>We can see how the “amount” section above therefore lists the net transfer of 0 (-1 +1) tokens. The reason why the net of this is the creation of 99 new “demoasset” is that the “reissueasset” command essentially spends from a zero balance address, and so the received amount has the effect of creating 99 new “demoasset”. The 99 new “demoasset” are basically spent into existence. It is worth highlighting again that in order to reissue an asset you must hold a related reissuance token. They must therefore be allocated wisely.</p>

<p>To check that the blinding works the same for a reissuance transaction as it does for a normal transaction we can check Bob’s view of Alice’s reissuance transaction. Wait a few seconds after running the “generate” command to let Bob’s node sync, then run the second and third lines:</p>

<pre><code>e1-cli generatetoaddress 1 $ADDRGEN1
RAWRTRANS=$(e2-cli getrawtransaction $RTXID)
e2-cli decoderawtransaction $RAWRTRANS
</code></pre>

<p>We can see that the amounts and asset types are indeed blinded with results like this:</p>

<div class="console-output">"value-minimum": 0.00000001,
"value-maximum": 42.94967296,
</div>

<p>You could unblind these using the techniques we used for the initial issuance should you want to.</p>

<p>We have seen that reissuance is just a special kind of spending transaction whereby you can create more of the original asset, so long as you hold a valid reissuance token in your wallet. Next we will look at how to transfer the reissuance tokens.</p>

<p>Let’s send the reissuance token from Alice to Bob so that Bob can reissue some “demoasset” himself. Note that if there was always going to be a need for them both to reissue the asset at the same time, we could have just created two reissuance tokens and initially sent one to Bob, leaving Alice still holding the other. Either way, we would need to send from one wallet to the other, so let’s begin. First we’ll double check that Alice’s wallet currently holds the reissuance token and Bob’s does not:</p>

<pre><code>e1-cli getwalletinfo
e2-cli getwalletinfo
</code></pre>

<p>Alice’s wallet has “bitcoin”, “demoasset” and the demo asset’s reissuance token whereas Bob’s only has “bitcoin”.</p>

<p>We’ll just prove that the token is needed to reissue by trying to reissue from Bob’s wallet without the token:</p>

<pre><code>e2-cli reissueasset $ASSET 10
</code></pre>

<p>That fails as expected and gives the following error message:</p>

<div class="console-output">No available reissuance tokens in wallet.
</div>

<p>So let’s send the reissuance token to Bob so that he can reissue some of our “demoasset”. Have Bob’s wallet generate a new address and save it in a variable:</p>

<pre><code>RITRECADD=$(e2-cli getnewaddress)
</code></pre>

<p>Send the token from Alice’s wallet to Bob’s new address as if it were any other asset. We’ll use the hex of the token to say what type of asset we are sending and also generate a block so the transaction confirms:</p>

<pre><code>e1-cli sendtoaddress $RITRECADD 1 "" "" false false 1 UNSET $TOKEN
e1-cli generatetoaddress 1 $ADDRGEN1
</code></pre>

<p>Check that Bob’s wallet now has the token and that Alice’s no longer does:</p>

<pre><code>e2-cli getwalletinfo
e1-cli getwalletinfo
</code></pre>

<p>The token and right to reissue it provides is now Bob’s!</p>

<h5 id="note-remember-from-an-earlier-note-that-we-can-divide-a-reissuance-token-like-any-other-asset-in-elements-our-send-of-1-token-in-this-instance-actually-transferred-100000000-of-the-smallest-possible-amount-of-the-token-you-can-try-sending-something-like-01-of-the-token-back-to-alice-and-check-if-she-is-again-able-to-reissue-she-will-and-so-will-bob-who-will-still-hold-09">NOTE: Remember from an earlier note that we can divide a reissuance token like any other asset in Elements. Our send of “1” token in this instance actually transferred 100,000,000 of the smallest possible amount of the token. You can try sending something like “0.1” of the token back to Alice and check if she is again able to reissue (she will and so will Bob, who will still hold “0.9”).</h5>

<p>Bob still doesn’t have any of the “demoasset” itself yet but, now that his wallet holds the reissuance token, he can reissue any amount of “demoasset” and it will show in his wallet:</p>

<pre><code>RISSUE=$(e2-cli reissueasset $ASSET 10)
e2-cli getwalletinfo
</code></pre>

<p>Bob’s wallet now has “bitcoin”, the reissuance token for our new asset, and an amount of the new asset itself:</p>

<div class="console-output">"balance": {
    "bitcoin": 10499998.99841940,
    "78ee1e3b9f2edf730e7f624e9d0f92d3e1d364c0ee91525bbccf56377dcd5033": 1.00000000,
    "600010d2a60cf0d9395dced79af3ccdb7c908e80cddf125ed1af80dc87186aae": 10.00000000
},
</div>

<p>Remember that the new asset we issued will still only display using its hex value in Bob’s wallet as we didn’t assign it a label like we did in Alice’s wallet. In order for Alice to see this reissuance we need to make her wallet aware of it:</p>

<pre><code>e2-cli generatetoaddress 1 $ADDRGEN2
</code></pre>

<p>Show that Alice’s wallet can’t see it:</p>

<pre><code>e1-cli listissuances
</code></pre>

<p>Import the address so that it can:</p>

<pre><code>RITXID=$(echo $RISSUE | jq -r '.txid')
RIADDR=$(e2-cli gettransaction $RITXID | jq -r '.details[0].address')
e1-cli importaddress $RIADDR
</code></pre>

<p>Or if, for whatever reason, the address is not known to Alice but the TXID is (requires index=1 in config file to work):</p>

<pre><code>RITXID=$(echo $RISSUE | jq -r '.txid')
REISSUE_RAW_TX=$(e1-cli getrawtransaction $RITXID 1)
REISSUE_VOUTS=$(echo $REISSUE_RAW_TX | jq -r '.vout')
VOUT_ADDRESS_REISSUE=$(echo $REISSUE_VOUTS | jq -r '.[0].scriptPubKey.addresses[0]')
e1-cli importaddress $VOUT_ADDRESS_REISSUE
</code></pre>

<p>Either way, now Alice’s wallet can see the reissuance:</p>

<pre><code>e1-cli listissuances
</code></pre>

<p>As expected though, the amounts are blinded. You can unblind by importing the blinding key as we did earlier should you want to.</p>

<p>In Elements you can also carry out an unblinded asset issue:</p>

<pre><code>UBRISSUE=$(e2-cli issueasset 55 1 false)
UBASSET=$(echo $UBRISSUE | jq -r '.asset')
</code></pre>

<p>Which shows up as normal in Bob’s wallet after he issues it:</p>

<pre><code>e2-cli getwalletinfo
</code></pre>

<p>And this time if we import the address into Alice’s wallet she should be able to see the amount issued, proving it was issued unblinded. Following the same process as before to import the address into Alice’s wallet:</p>

<pre><code>e2-cli generatetoaddress 1 $ADDRGEN2
e1-cli listissuances
UBRITXID=$(echo $UBRISSUE | jq -r '.txid')
UBRIADDR=$(e2-cli gettransaction $UBRITXID | jq -r '.details[0].address')
e1-cli importaddress $UBRIADDR
</code></pre>

<p>Or if, for whatever reason, the address is not known to Alice but the TXID is (requires index=1 in config file to work):</p>

<pre><code>e2-cli generatetoaddress 1 $ADDRGEN2
e1-cli listissuances
UBRITXID=$(echo $UBRISSUE | jq -r '.txid')
UBREISSUE_RAW_TX=$(e1-cli getrawtransaction $UBRITXID 1)
UBREISSUE_VOUTS=$(echo $UBREISSUE_RAW_TX | jq -r '.vout')
UBVOUT_ADDRESS_REISSUE=$(echo $UBREISSUE_VOUTS | jq -r '.[0].scriptPubKey.addresses[0]')
e1-cli importaddress $UBVOUT_ADDRESS_REISSUE
</code></pre>

<p>Either way, we can now see that Alice’s wallet can see both the issuance and the amount issued (55) without the need to import the blinding key:</p>

<pre><code>e1-cli listissuances
</code></pre>

<p>It may also be necessary to destroy asset amounts as well as create them in an Elements based blockchain. This is easily done using the “destroyamount” command:</p>

<pre><code>e2-cli destroyamount $UBASSET 5
</code></pre>

<p>Check the amount has gone from the 55 issued down to 50:</p>

<pre><code>e2-cli getwalletinfo
</code></pre>

<p>It will show the amount as 50, proving that an amount of 5 were indeed destroyed:</p>

<div class="console-output">"balance": {
    "4021bf6faac59d7ec593859a741318752f72e637e7d5ecfa54725dba1508771b": 50.00000000,
</div>

<p>Creating, reissuing and destroying assets is a key feature of Elements that can help you reflect the real world movement of assets represented on your blockchain or the flow of assets in and out from another blockchain.</p>

<p><a href="http://localhost:4000/elements-code-tutorial/block-creation">Next: Block creation in a Strong Federation</a></p>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <img class="logo-footer" alt="" src="http://localhost:4000/images/elements_logo_no_border.png" /> 
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list"><li class="footer-links"><a href="https://github.com/ElementsProject/elementsproject.github.io">elementsproject.org github</a></li><li class="footer-links"><a href="https://github.com/ElementsProject/elements">elements github</a></li></ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Elements - an open source, sidechain-capable blockchain platform.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
